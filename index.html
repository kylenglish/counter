<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–†–µ–¥–∞–∫—Ç–æ—Ä –≤–∏–¥–∂–µ—Ç–∞ "–°—á–µ—Ç—á–∏–∫ –±–∞–ª–ª–æ–≤"</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; padding: 20px; display: flex; gap: 20px; background: #f0f2f5; }
        .editor { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 380px; }
        .preview-zone { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #e0e0e0; border: 2px dashed #bbb; border-radius: 12px; }
        .field { margin-bottom: 15px; }
        label { display: block; font-size: 13px; margin-bottom: 5px; font-weight: bold; color: #444; }
        input[type="text"], input[type="range"], select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        input[type="color"] { width: 100%; height: 35px; border: none; cursor: pointer; background: none; }
        .copy-btn { width: 100%; padding: 15px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px; margin-top: 10px; }
        h2 { font-size: 20px; margin-top: 0; color: #1a73e8; border-bottom: 2px solid #1a73e8; padding-bottom: 10px; }
    </style>
</head>
<body>

<div class="editor">
    <h2>–†–µ–¥–∞–∫—Ç–æ—Ä –≤–∏–¥–∂–µ—Ç–∞ "–°—á–µ—Ç—á–∏–∫ –±–∞–ª–ª–æ–≤"</h2>
    
    <div class="field">
        <label>–ß—Ç–æ —Å–æ–±–∏—Ä–∞–µ–º (–∑–≤–µ–∑–¥–æ—á–∫–∏, —Ä–æ–∫–µ—Ç—ã, —Å–µ—Ä–¥–µ—á–∫–∏ –∏ —Ç.–ø.)</label>
        <input type="text" id="labelInput" value="Points" oninput="update()">
    </div>

    <div class="field">
        <label>–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∫–æ–Ω–∫—É (–ø—É—Å—Ç–æ = ‚≠ê)</label>
        <input type="text" id="iconInput" placeholder="https://..." oninput="update()">
    </div>

    <div class="field">
        <label>–†–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏: <span id="iconSizeVal">24</span>px</label>
        <input type="range" id="iconSize" min="15" max="80" value="24" oninput="update()">
    </div>

    <div class="field">
        <label>–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞: <span id="fontSizeVal">18</span>px</label>
        <input type="range" id="fontSize" min="12" max="40" value="18" oninput="update()">
    </div>

    <div class="field">
        <label>–í—ã–±–æ—Ä —à—Ä–∏—Ñ—Ç–∞</label>
        <select id="fontSelect" onchange="update()">
            <option value="Arial, sans-serif">Arial (–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)</option>
            <option value="'Montserrat', sans-serif">Montserrat (Genially)</option>
            <option value="'Roboto', sans-serif">Roboto</option>
            <option value="'Courier New', monospace">Courier New</option>
            <option value="Georgia, serif">Georgia</option>
            <option value="'Comic Sans MS', cursive">Comic Sans</option>
        </select>
    </div>

    <div class="field">
        <label>–¶–≤–µ—Ç —Ñ–æ–Ω–∞</label>
        <input type="color" id="bgColor" value="#ffffff" oninput="update()">
    </div>

    <div class="field">
        <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –∏ –∫–Ω–æ–ø–æ–∫</label>
        <input type="color" id="textColor" value="#333333" oninput="update()">
    </div>

    <button onclick="copyCode()" class="copy-btn">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –¥–ª—è Genially</button>
</div>

<div class="preview-zone">
    <h3 style="color: #666;">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:</h3>
    <div id="preview-container"></div>
</div>

<script>
function update() {
    const label = document.getElementById('labelInput').value;
    const iconUrl = document.getElementById('iconInput').value;
    const iSize = document.getElementById('iconSize').value;
    const fSize = document.getElementById('fontSize').value;
    const bg = document.getElementById('bgColor').value;
    const text = document.getElementById('textColor').value;
    const font = document.getElementById('fontSelect').value;

    document.getElementById('iconSizeVal').innerText = iSize;
    document.getElementById('fontSizeVal').innerText = fSize;

    const iconHtml = iconUrl 
        ? `<img src="${iconUrl}" style="width:${iSize}px; height:auto; margin-right:10px; vertical-align: middle;">` 
        : `<span style="font-size:${iSize}px; margin-right:10px; vertical-align: middle;">‚≠ê</span>`;

    const finalCode = `
<div id="wrapper" style="display: inline-block; user-select: none; vertical-align: middle;">
    <div style="display: flex; align-items: center; background: ${bg}; color: ${text}; border-radius: 50px; padding: 10px 20px; font-family: ${font}; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 1px solid rgba(0,0,0,0.2);">
        ${iconHtml}
        <span style="font-size: ${fSize}px; font-weight: bold; vertical-align: middle; line-height: 1; margin-right: 15px;">
            ${label}: <span id="count">0</span>
        </span>
        
        <div style="display: flex; gap: 8px; align-items: center;">
            <div id="minus_btn" style="background:${text}22; color:${text}; border-radius:50%; width:28px; height:28px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:20px; line-height: 1;">‚àí</div>
            <div id="plus_btn" style="background:${text}; color:${bg}; border-radius:50%; width:28px; height:28px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:20px; line-height: 1;">+</div>
            <div id="reset_btn" style="margin-left:5px; cursor:pointer; opacity: 0.6; font-size: 18px;" title="–°–±—Ä–æ—Å–∏—Ç—å">üóëÔ∏è</div>
        </div>
    </div>
</div>

<script>
(function() {
    const key = 'genially_val_sum';
    const display = document.getElementById('count');
    const bPlus = document.getElementById('plus_btn');
    const bMinus = document.getElementById('minus_btn');
    const bReset = document.getElementById('reset_btn');
    
    function refresh() {
        display.innerText = localStorage.getItem(key) || '0';
    }
    
    function animate(el) {
        el.style.transform = 'scale(1.2)';
        setTimeout(() => el.style.transform = 'scale(1)', 100);
    }

    bPlus.onclick = function(e) {
        e.stopPropagation();
        let val = parseInt(localStorage.getItem(key)) || 0;
        val++;
        localStorage.setItem(key, val);
        refresh();
        animate(bPlus);
    };

    bMinus.onclick = function(e) {
        e.stopPropagation();
        let val = parseInt(localStorage.getItem(key)) || 0;
        if (val > 0) {
            val--;
            localStorage.setItem(key, val);
            refresh();
            animate(bMinus);
        }
    };

    bReset.onclick = function(e) {
        e.stopPropagation();
        if (confirm('–û–±–Ω—É–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç?')) {
            localStorage.setItem(key, 0);
            refresh();
        }
    };
    
    refresh();
    window.addEventListener('storage', refresh);
    setTimeout(refresh, 300);
})();
<\/script>`;

    document.getElementById('preview-container').innerHTML = finalCode;
    window.generatedCode = finalCode;
}

function copyCode() {
    const el = document.createElement('textarea');
    el.value = window.generatedCode;
    document.body.appendChild(el);
    el.select();
    document.execCommand('copy');
    document.body.removeChild(el);
    alert('–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –¢–µ–ø–µ—Ä—å –≤—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ Genially (Insert -> Others)');
}

update();
</script>
</body>
</html>
