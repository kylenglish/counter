<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–†–µ–¥–∞–∫—Ç–æ—Ä –≤–∏–¥–∂–µ—Ç–∞ "–°—á–µ—Ç—á–∏–∫ –±–∞–ª–ª–æ–≤"</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; padding: 20px; display: flex; gap: 20px; background: #f0f2f5; }
        .editor { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 420px; height: fit-content; }
        .preview-zone { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #e0e0e0; border: 2px dashed #bbb; border-radius: 12px; min-height: 500px; }
        .field { margin-bottom: 15px; }
        label { display: block; font-size: 13px; margin-bottom: 5px; font-weight: bold; color: #444; }
        input[type="text"], input[type="range"], select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        input[type="color"] { width: 100%; height: 35px; border: none; cursor: pointer; background: none; }
        .hint { font-size: 11px; color: #666; font-weight: normal; line-height: 1.4; display: block; margin-top: 4px; }
        .copy-btn { width: 100%; padding: 15px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px; margin-top: 10px; }
        h2 { font-size: 20px; margin-top: 0; color: #1a73e8; border-bottom: 2px solid #1a73e8; padding-bottom: 10px; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Bad+Script&family=Bitter&family=Caveat&family=Comfortaa:wght@300..700&family=Marck+Script&family=Montserrat:wght@400;700&family=Open+Sans:wght@400;700&family=Playfair+Display:wght@400;700&family=Raleway:wght@400;700&family=Roboto:wght@400;700&family=Stalinist+One&family=Ubuntu:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

<div class="editor">
    <h2>–†–µ–¥–∞–∫—Ç–æ—Ä –≤–∏–¥–∂–µ—Ç–∞ "–°—á–µ—Ç—á–∏–∫ –±–∞–ª–ª–æ–≤"</h2>
    
    <div class="field">
        <label>–ö–æ–¥ (ID) –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
        <input type="text" id="idInput" value="my_cool_lesson" oninput="update()">
        <span class="hint">–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∫–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ (–Ω–∞–ø—Ä. 'test1'), –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—á–µ—Ç—á–∏–∫ –≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è—Ö –æ—Ç–¥–µ–ª—å–Ω–æ.</span>
    </div>

    <div class="field">
        <label>–ß—Ç–æ —Å–æ–±–∏—Ä–∞–µ–º (–∑–≤–µ–∑–¥–æ—á–∫–∏, —Ä–æ–∫–µ—Ç—ã –∏ —Ç.–ø.)</label>
        <input type="text" id="labelInput" value="Points" oninput="update()">
    </div>

    <div class="field">
        <label>–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∫–æ–Ω–∫—É (–ø—É—Å—Ç–æ = ‚≠ê)</label>
        <input type="text" id="iconInput" placeholder="https://..." oninput="update()">
    </div>

    <div class="field" style="display:flex; gap:10px;">
        <div style="flex:1">
            <label>–ò–∫–æ–Ω–∫–∞: <span id="iconSizeVal">24</span>px</label>
            <input type="range" id="iconSize" min="15" max="80" value="24" oninput="update()">
        </div>
        <div style="flex:1">
            <label>–¢–µ–∫—Å—Ç: <span id="fontSizeVal">18</span>px</label>
            <input type="range" id="fontSize" min="12" max="40" value="18" oninput="update()">
        </div>
    </div>

    <div class="field">
        <label>–í—ã–±–æ—Ä —à—Ä–∏—Ñ—Ç–∞ (–∏–∑ Genially)</label>
        <select id="fontSelect" onchange="update()">
            <option value="'Roboto', sans-serif">Roboto</option>
            <option value="'Open Sans', sans-serif">Open Sans</option>
            <option value="'Montserrat', sans-serif">Montserrat</option>
            <option value="'Comfortaa', cursive">Comfortaa</option>
            <option value="'Playfair Display', serif">Playfair Display</option>
            <option value="'Raleway', sans-serif">Raleway</option>
            <option value="'Ubuntu', sans-serif">Ubuntu</option>
            <option value="'Bitter', serif">Bitter</option>
            <option value="'Caveat', cursive">Caveat</option>
            <option value="'Marck Script', cursive">Marck Script</option>
            <option value="'Bad Script', cursive">Bad Script</option>
            <option value="'Stalinist One', cursive">Stalinist One</option>
        </select>
    </div>

    <div class="field" style="display:flex; gap:10px;">
        <div style="flex:1">
            <label>–¶–≤–µ—Ç —Ñ–æ–Ω–∞</label>
            <input type="color" id="bgColor" value="#ffffff" oninput="update()">
        </div>
        <div style="flex:1">
            <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</label>
            <input type="color" id="textColor" value="#333333" oninput="update()">
        </div>
    </div>

    <button onclick="copyCode()" class="copy-btn">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –¥–ª—è Genially</button>
</div>

<div class="preview-zone">
    <h3 style="color: #666;">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:</h3>
    <div id="preview-container"></div>
</div>

<script>
function update() {
    const lessonID = document.getElementById('idInput').value.replace(/[^a-z0-9]/gi, '_') || 'default';
    const label = document.getElementById('labelInput').value;
    const iconUrl = document.getElementById('iconInput').value;
    const iSize = document.getElementById('iconSize').value;
    const fSize = document.getElementById('fontSize').value;
    const bg = document.getElementById('bgColor').value;
    const text = document.getElementById('textColor').value;
    const font = document.getElementById('fontSelect').value;

    document.getElementById('iconSizeVal').innerText = iSize;
    document.getElementById('fontSizeVal').innerText = fSize;

    const iconHtml = iconUrl 
        ? `<img src="${iconUrl}" style="width:${iSize}px; height:auto; margin-right:10px; vertical-align: middle;">` 
        : `<span style="font-size:${iSize}px; margin-right:10px; vertical-align: middle;">‚≠ê</span>`;

    const finalCode = `
<link href="https://fonts.googleapis.com/css2?family=Bad+Script&family=Bitter&family=Caveat&family=Comfortaa&family=Marck+Script&family=Montserrat&family=Open+Sans&family=Playfair+Display&family=Raleway&family=Roboto&family=Stalinist+One&family=Ubuntu&display=swap" rel="stylesheet">
<div id="w_${lessonID}" style="display: inline-block; user-select: none; vertical-align: middle;">
    <div style="display: flex; align-items: center; background: ${bg}; color: ${text}; border-radius: 50px; padding: 10px 20px; font-family: ${font}; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 1px solid rgba(0,0,0,0.2);">
        ${iconHtml}
        <span style="font-size: ${fSize}px; font-weight: bold; vertical-align: middle; line-height: 1; margin-right: 15px;">
            ${label}: <span id="c_${lessonID}">0</span>
        </span>
        <div style="display: flex; gap: 8px; align-items: center;">
            <div id="m_${lessonID}" style="background:${text}22; color:${text}; border-radius:50%; width:28px; height:28px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:20px; line-height: 1;">‚àí</div>
            <div id="p_${lessonID}" style="background:${text}; color:${bg}; border-radius:50%; width:28px; height:28px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:20px; line-height: 1;">+</div>
            <div id="r_${lessonID}" style="margin-left:5px; cursor:pointer; opacity: 0.6; font-size: 18px;" title="–°–±—Ä–æ—Å–∏—Ç—å">üóëÔ∏è</div>
        </div>
    </div>
</div>

<script>
(function() {
    const key = 'gen_storage_${lessonID}';
    const display = document.getElementById('c_${lessonID}');
    
    function refresh() {
        display.innerText = localStorage.getItem(key) || '0';
    }
    
    document.getElementById('p_${lessonID}').onclick = function(e) {
        e.stopPropagation();
        let val = parseInt(localStorage.getItem(key)) || 0;
        localStorage.setItem(key, val + 1);
        refresh();
    };

    document.getElementById('m_${lessonID}').onclick = function(e) {
        e.stopPropagation();
        let val = parseInt(localStorage.getItem(key)) || 0;
        if (val > 0) {
            localStorage.setItem(key, val - 1);
            refresh();
        }
    };

    document.getElementById('r_${lessonID}').onclick = function(e) {
        e.stopPropagation();
        if (confirm('–û–±–Ω—É–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç?')) {
            localStorage.setItem(key, 0);
            refresh();
        }
    };
    
    refresh();
    window.addEventListener('storage', refresh);
    setTimeout(refresh, 300);
})();
<\/script>`;

    document.getElementById('preview-container').innerHTML = finalCode;
    window.generatedCode = finalCode;
}

function copyCode() {
    const el = document.createElement('textarea');
    el.value = window.generatedCode;
    document.body.appendChild(el);
    el.select();
    document.execCommand('copy');
    document.body.removeChild(el);
    alert('–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –í—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ Genially.');
}

update();
</script>
</body>
</html>
